jQuery(document).ready(function(o){o("#cdp-purl").val();let t="default";function e(){o.cdpModal("cdp-copy-modal-global");let t=o(".cdp-modal-input-profiles-r").val();o('[name="tooltip-which-profile-second"]').val(t),o('.cdp-input-dynamic[name="tooltip-which-profile-second"]').trigger("change")}function c(){if(o("#cdp-current-post-id").length>0)return[o("#cdp-current-post-id").val()];$rows=o("#the-list").find("tr"),$ids=[];for(var t=0;t<$rows.length;t++){let e=o($rows[t]);e.find('input[name="post[]"]').is(":checked")&&$ids.push(e.find('input[name="post[]"]').attr("value"))}return $ids}function i(t=(()=>{})){window.onbeforeunload=null,$e=o(".cdp-copy-loader-overlay"),$e.is(":hidden")||$e.animate({opacity:0},300,function(){$e.hide(),t(!0)})}o(".cdp-admin-bar-copy").on("click",e),o("body").on("click",".cdp-editor-gutenberg-copy",e),o("body").on("click",".cdp-copy-btn-editor",e),o("body").on("click",".cdp-copy-modal-button",function(){let e=o(this).attr("data-cdp-btn"),n=["copy-quick","copy-custom","copy-custom-link"];if(n.includes(e)){let p={type:e},a=c(),d=o(".cdp-modal-checkboxes").find(".cdp-modal-option-r");if(a.length<=0)return void o.cdpNotification("warning",cdpModalJS.strRowCopyTryAgain);let l=o(".cdp-modal-input-profiles-r").val();p.custom={},p.times=o(".cdp-modal-input-times").val(),p.site=o(".cdp-modal-input-site").val(),p.swap="2"==o(".cdp-swap").val()?"true":"false",p.profile=l;let s=["clear","custom","custom_named","null","undefined",null,void 0];if(l&&!s.includes(l)&&(t=l),!p.profile){if(!t||s.includes(t))return o.cdpNotification("warning",cdpModalJS.strSettCopyIssue),void i();p.profile=t}for(let t=0;t<d.length;++t)p.custom[o(d[t]).attr("name")]=o(d[t]).is(":checked");setTimeout(()=>{let t=o.tooltipster.instances();for(instance in t)t[instance].close()},10),function(t=(()=>{})){window.onbeforeunload=(()=>cdpModalJS.strCopyInProgress),$e=o(".cdp-copy-loader-overlay"),$e.is(":hidden")&&($e.show(),$e.animate({opacity:1},300,function(){t(!0)}))}(()=>{o.ajax({type:"POST",url:ajaxurl,data:{action:"cdp_action_handling",token:"cdp",f:"copy_post",origin:"modal",id:a,data:p},timeout:0}).done(function(t){o.isJsonString(t)&&(t=o.cdpParse(t));"error"==t.status?o.cdpNotification("error",cdpModalJS.strPostCopyIssue):(i(),e==n[2]||t.link&&t.link.length>0?"pConv"==t.link?(o.post(ajaxurl,{action:"cdp_action_handling",token:"cdp",f:"delete_success_img"}),"-28"==o(".cdp-copy-alert-success").position().top&&o(".cdp-copy-alert-success").animate({top:"32px",opacity:1},300),setTimeout(()=>{"32"==o(".cdp-copy-alert-success").position().top&&o(".cdp-copy-alert-success").animate({top:"-28px",opacity:0},300)},3e3),o.cdpModalClose("cdp-copy-modal-global")):window.location.href=t.link:"undefined"==typeof pagenow||"post"==pagenow||"page"==pagenow?(o.post(ajaxurl,{action:"cdp_action_handling",token:"cdp",f:"delete_success_img"}),"-28"==o(".cdp-copy-alert-success").position().top&&o(".cdp-copy-alert-success").animate({top:"32px",opacity:1},300),setTimeout(()=>{"32"==o(".cdp-copy-alert-success").position().top&&o(".cdp-copy-alert-success").animate({top:"-28px",opacity:0},300)},3e3),o.cdpModalClose("cdp-copy-modal-global")):location.reload())}).fail(function(t){o.cdpNotification("error",cdpModalJS.strPostCopyIssueConsoleInfo),i(),console.log(t),console.log(t.responseText)})})}else o.cdpNotification(cdpModalJS.strRecogBtnIssue)}),o("body").on("change",".cdp-modal-input-profiles-r",function(){let e=["clear","custom","custom_named","null","undefined",null,void 0];o(this).val()&&!e.includes(o(this).val())&&(t=o(this).val())}),o("#posts-filter").on("submit",function(t){"cdp_bulk_copy"==o("#bulk-action-selector-top").val()&&(t.preventDefault(),$ids=c(),$ids.length<=0?o.cdpNotification("warning",cdpModalJS.strRowCopyIssue):e())})});